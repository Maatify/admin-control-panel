{% extends "layouts/base.twig" %}

{% block title %}Sessions
{% endblock %}

{% block content %}
	<div class="flex flex-wrap items-center justify-between gap-3 ">
		<h2 class="text-xl font-semibold text-gray-800">Sessions</h2>
		<nav>
			<ol class="flex items-center gap-1.5">
				<li>
					<a class="inline-flex items-center gap-1.5 text-sm text-gray-500" href="index.html">
						Home
						<svg class="stroke-current" width="17" height="16" viewbox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M6.0765 12.667L10.2432 8.50033L6.0765 4.33366" stroke="" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path>
						</svg>
					</a>
				</li>
				<li class="text-sm text-gray-800">Sessions</li>
			</ol>
		</nav>
	</div>

    <div class=" px-0 py-2">
		<!-- Header -->
		<div class="flex flex-col md:flex-row md:items-center md:justify-between pt-3 pb-4 mb-6 border-b border-gray-200">
			<div class="mb-4 md:mb-0">
				<h1 class="text-2xl font-bold text-gray-800">Sessions</h1>
			</div>
			<div class="flex items-center space-x-2">
				<button class="px-4 py-2 bg-white text-red-600 border border-red-600 rounded-md hover:bg-red-600 hover:text-white cursor-not-allowed" id="btn-bulk-revoke" disabled>
					Revoke Selected
					<span id="selected-count" class="ml-2 inline-flex items-center justify-center w-6 h-6 text-xs font-semibold text-red-700 bg-red-100 rounded-full">
						0
					</span>
				</button>
			</div>
		</div>

		<!-- Alert Container -->
		<div id="alert-container"></div>

		<!-- Description -->
		<p class="text-gray-500 mb-6">Manage active admin sessions</p>

		<!-- Search Section -->
		<div class="bg-white rounded-lg shadow border border-gray-200 mb-6">
			<div class="p-6">
				<form
					id="sessions-search-form" class="grid grid-cols-1 md:grid-cols-4 gap-4">
					<!-- Session ID Filter -->
					<div>
						<label for="filter-session-id" class="block text-sm font-medium text-gray-700 mb-1">
							Session ID
						</label>
						<input type="text" id="filter-session-id" class="w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Search by ID fragment">
					</div>

					<!-- Admin Filter -->
					<div>
						<label for="filter-admin-id" class="block text-sm font-medium text-gray-700 mb-1">
							Filter by Admin
						</label>
						<select id="filter-admin-id" class="w-full px-3 py-2 bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
							<option value="">All Admins</option>
							<option disabled>Loading...</option>
						</select>
					</div>

					<!-- Status Filter -->
					<div>
						<label for="filter-status" class="block text-sm font-medium text-gray-700 mb-1">
							Status
						</label>
						<select id="filter-status" class="w-full px-3 py-2 border bg-white border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
							<option value="">All</option>
							<option value="active">Active</option>
							<option value="revoked">Revoked</option>
							<option value="expired">Expired</option>
						</select>
					</div>

					<!-- Action Buttons -->
					<div class="flex items-end space-x-2">
						<button type="submit" class="px-4 py-1 bg-blue-600 text-white rounded-md hover:bg-white hover:text-blue-600 border  hover:border-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
							Search
						</button>
						<button type="button" id="btn-reset" class="px-4 py-1 bg-white text-gray-600 border border-gray-600 rounded-md hover:bg-gray-600 hover:text-white focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2">
							Reset
						</button>
					</div>
				</form>
			</div>
		</div>

		<!-- DataTable Section -->
		<div class="bg-white rounded-lg shadow border border-gray-200 overflow-hidden">
			<div class="p-6">
				<div class="overflow-x-auto">
					<table class="min-w-full divide-y divide-gray-200" id="sessions-table">
						<thead class="">
							<tr>
								<th class="w-12 px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
									<input type="checkbox" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500" id="select-all">
								</th>
								<th class="px-6 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider">
									Session ID
								</th>
								<th class="px-6 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider">
									Owner
								</th>
								<th class="px-6 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider">
									Created At
								</th>
								<th class="px-6 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider">
									Expires At
								</th>
								<th class="px-6 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider">
									Status
								</th>
								<th class="px-6 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider">
									Actions
								</th>
							</tr>
						</thead>
						<tbody
							class="bg-white divide-y divide-gray-200 ">
							<!-- Content loaded via API -->
							<tr>
								<td colspan="7" class="px-6 py-4 text-center text-gray-500">
									<div class="flex justify-center items-center py-8">
										<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
										<span class="ml-3">Loading sessions...</span>
									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>

				<!-- Pagination -->
				<div class="flex flex-col md:flex-row md:items-center md:justify-between mt-6 pt-6 border-t border-gray-200">
					<div class="flex items-center space-x-4 mb-4 md:mb-0">
						<div class="flex items-center">
							<label for="per-page-select" class="text-sm text-gray-700 mr-2">Show</label>
							<select id="per-page-select" class="px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
								<option value="10">10</option>
								<option value="20" selected>20</option>
								<option value="50">50</option>
								<option value="100">100</option>
							</select>
							<span class="text-sm text-gray-700 ml-2">entries</span>
						</div>
						<div class="text-sm text-gray-500" id="pagination-info">
							Showing 0 to 0 of 0 entries
						</div>
					</div>

					<nav
						class="flex items-center justify-between" id="pagination-controls">
						<!-- Pagination links generated by JS -->
						<div class="flex rounded-md shadow-sm justify-between w-full">
							<button class="px-3 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
								Previous
							</button>
							<button class="px-3 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">
								1
							</button>
							<button class="px-3 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
								Next
							</button>
						</div>
					</nav>
				</div>
			</div>
		</div>
	</div>
{% endblock %}

{% block scripts %}
	<script src="/assets/js/pages/sessions.js"></script>
{% endblock %}
